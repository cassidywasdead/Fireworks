<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fireworks</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
}
canvas{
  display:block;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<audio id="fireSound" src="fireworks.mp3"></audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.onresize = () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
};

// ðŸ”Š AUDIO (NO GAP LOOP)
const audio = document.getElementById("fireSound");
audio.volume = 1;

function playFireSound(){
  audio.currentTime = 0;
  audio.play();
}
audio.addEventListener("ended", playFireSound);
playFireSound();

// ðŸŽ† FIREWORK SYSTEM
let fireworks = [];

function randomColor(){
  const colors = ["#ff3", "#f0f", "#0ff", "#0f0", "#f00", "#fff", "#ff8800"];
  return colors[Math.floor(Math.random()*colors.length)];
}

function createFirework(x,y){
  let particles = [];
  for(let i=0;i<250;i++){
    particles.push({
      x:x,
      y:y,
      vx: Math.cos(i)*Math.random()*6,
      vy: Math.sin(i)*Math.random()*6,
      alpha:1,
      color: randomColor()
    });
  }
  fireworks.push(particles);
}

function update(){
  ctx.fillStyle="rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  fireworks.forEach((fw,index)=>{
    fw.forEach(p=>{
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.02;
      p.alpha -= 0.01;
      ctx.beginPath();
      ctx.arc(p.x,p.y,2,0,Math.PI*2);
      ctx.fillStyle = p.color;
      ctx.fill();
    });
    fireworks[index] = fw.filter(p=>p.alpha>0);
  });

  fireworks = fireworks.filter(fw=>fw.length>0);
  requestAnimationFrame(update);
}
update();

// ðŸŽ‡ 2 FIREWORKS IN ONE ROW STYLE
setInterval(()=>{
  let y = Math.random()*canvas.height*0.5 + 100;
  createFirework(canvas.width*0.3,y);
  createFirework(canvas.width*0.7,y);
},900);

// EXTRA RANDOM ON CLICK
canvas.addEventListener("click",e=>{
  createFirework(e.clientX,e.clientY);
});
</script>

</body>
</html>
