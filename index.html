<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fireworks</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
}
canvas{display:block;}
#startBtn{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:black;
  color:white;
  font-size:24px;
  font-family:Arial;
  z-index:10;
}
</style>
</head>
<body>

<div id="startBtn">Tap to Start ðŸŽ†</div>
<canvas id="canvas"></canvas>
<audio id="fireSound" src="fireworks.mp3"></audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;
onresize=()=>{canvas.width=innerWidth;canvas.height=innerHeight;}

const audio = document.getElementById("fireSound");
audio.volume = 1;

const startBtn = document.getElementById("startBtn");

startBtn.onclick = () => {
  startBtn.style.display="none";
  playSoundLoop();
  startFireworks();
};

// ðŸ”Š perfect loop (no blank gap)
function playSoundLoop(){
  audio.currentTime = 0;
  audio.play();
  audio.onended = () => {
    audio.currentTime = 0;
    audio.play();
  };
}

// ðŸŽ† FIREWORK SYSTEM
let fireworks=[];

function randomColor(){
  const colors=["red","yellow","lime","cyan","orange","violet","white","blue"];
  return colors[Math.floor(Math.random()*colors.length)];
}

function createFirework(x,y){
  const color = randomColor(); // ek patakha = ek hi color
  let particles=[];
  for(let i=0;i<200;i++){
    const angle = (Math.PI*2*i)/200;
    const speed = Math.random()*6+3;
    particles.push({
      x,y,
      vx:Math.cos(angle)*speed,
      vy:Math.sin(angle)*speed,
      alpha:1,
      color
    });
  }
  fireworks.push(particles);
}

function animate(){
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  fireworks.forEach((fw,fi)=>{
    fw.forEach(p=>{
      p.x+=p.vx;
      p.y+=p.vy;
      p.vy+=0.03;
      p.alpha-=0.01;
      ctx.globalAlpha=p.alpha;
      ctx.beginPath();
      ctx.arc(p.x,p.y,2.2,0,Math.PI*2);
      ctx.fillStyle=p.color;
      ctx.fill();
    });
    fireworks[fi]=fw.filter(p=>p.alpha>0);
  });

  fireworks=fireworks.filter(fw=>fw.length>0);
  requestAnimationFrame(animate);
}
animate();

// ðŸŽ‡ 2 patakhe ek line me continuously
function startFireworks(){
  setInterval(()=>{
    let y = Math.random()*canvas.height*0.5+100;
    createFirework(canvas.width*0.3,y);
    createFirework(canvas.width*0.7,y);
  },1200);
}

// extra click burst
canvas.onclick = e => createFirework(e.clientX,e.clientY);
</script>
</body>
</html>
