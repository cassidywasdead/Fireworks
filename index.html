<style>
.spark {
  position: fixed;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  transition: 1.8s ease-out;
}
</style>

<script>
let soundUnlocked = false;

document.body.addEventListener("click", function unlockSound() {
  const sound = document.getElementById("fireSound");
  sound.play().then(() => {
    sound.pause();
    sound.currentTime = 0;
    soundUnlocked = true;
  });
  document.body.removeEventListener("click", unlockSound);
});

function firework() {
  const x = window.innerWidth / 2;
  const y = window.innerHeight / 2;

  if (soundUnlocked) {
    const sound = document.getElementById("fireSound");
    sound.currentTime = 0;
    sound.play();
  }

  const colors = ["white", "pink", "yellow", "cyan", "orange", "violet"];

  for (let i = 0; i < 180; i++) {
    const spark = document.createElement("div");
    spark.className = "spark";
    spark.style.left = x + "px";
    spark.style.top = y + "px";

    const color = colors[Math.floor(Math.random() * colors.length)];
    spark.style.background = color;
    spark.style.boxShadow = `0 0 15px ${color}, 0 0 30px ${color}`;

    document.body.appendChild(spark);

    const angle = (i / 180) * Math.PI * 2;
    const distance = 350 + Math.random() * 150;

    setTimeout(() => {
      spark.style.transform =
        `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
      spark.style.opacity = 0;
    }, 20);

    setTimeout(() => spark.remove(), 2000);
  }
}

// one firework at a time (no overlap)
function startFireworks() {
  firework();
  setTimeout(startFireworks, 2200);
}

startFireworks();
</script>
